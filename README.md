# ğŸ©º C.A.R.E: Clinical Assistant for Research and Evidence

**C.A.R.E.** is a prototype **clinical decision support system (CDSS)** designed to assist healthcare professionals by combining **Retrieval-Augmented Generation (RAG)** with real-time medical research integration.

It intelligently analyzes patient data, fetches relevant medical studies from the **Semantic Scholar API**, and generates a **Preliminary Treatment Plan** â€” along with a **patient-friendly educational PDF** that explains the plan in simple language.

---

## ğŸ§  Project Overview

C.A.R.E. operates as an intelligent assistant for clinical decision-making.

It has two main outputs:

1. **Preliminary Treatment Plan**
   - Generated by a **RAG pipeline** that merges patient-specific data with up-to-date research.
   - Uses **Pathway** for document monitoring, indexing, and hybrid retrieval.

2. **Patient-Friendly Educational Material**
   - A **downloadable PDF** that explains the treatment plan in clear, empathetic language.
   - Generated by a second **LLM call** for human-readable explanations.

---

## ğŸ—ï¸ System Architecture

C.A.R.E. follows a **microservice-based architecture** â€” separating the user interface from backend processing for scalability and modularity.

### 1. Pathway RAG Pipeline Server (`pipeline.py`)
**Technology:** `pathway`  
**Runs on:** `http://localhost:8001`  

#### Role:
- Persistent background service for data ingestion and retrieval.

#### Functionality:
- Monitors `Data/processed/patient_text/` and `Data/processed/research/` directories.
- Automatically parses, splits, and indexes new `.txt` documents.
- Uses a **hybrid retrieval system** (BM25 + Vector Embeddings).
- Exposes an API endpoint `/v2/answer` for structured query responses.

---

### 2. FastAPI Web Server (`api_server.py`)
**Technology:** `FastAPI`, `Jinja2`  
**Runs on:** `http://localhost:8000`  

#### Role:
- Acts as the **user-facing interface** and **orchestration layer**.

#### Workflow:
1. **Patient Selection:**  
   User selects a patient; the system reads the corresponding file.

2. **Research Fetching:**  
   Invokes `research_fetcher` to dynamically query **Semantic Scholar API** for relevant papers.

3. **Indexing:**  
   New papers are saved to `Data/processed/research/`, automatically indexed by the RAG pipeline.

4. **Treatment Plan Generation:**  
   Waits ~20 seconds for indexing, then sends a **keyword-based prompt** to the RAG server.

5. **Display & Download:**  
   - Displays a structured treatment plan on the webpage.
   - On â€œDownload PDF,â€ converts it into a **patient-friendly educational document**.


## ğŸ§± Directory Structure

```bash
C.A.R.E/
â”œâ”€â”€ api_server.py
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â””â”€â”€ pipeline.py
â”‚   â”œâ”€â”€ data_processing/
â”‚   â”‚   â”œâ”€â”€ research_fetcher.py
â”‚   â”‚   â””â”€â”€ patient_educational_material.py
â”œâ”€â”€ Data/
â”‚   â””â”€â”€ processed/
â”‚       â”œâ”€â”€ patient_text/
â”‚       â”‚   â””â”€â”€ patient_123.txt
â”‚       â””â”€â”€ research/
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env
â””â”€â”€ README.md

---

## ğŸ’¾ Input & Output Examples

### **Input**
1. **Patient Data:**  
   `Data/processed/patient_text/patient_123.txt`  
   Contains condition summaries, medications, and medical history.

2. **User Action:**  
   User selects a patient and clicks **â€œGenerate Treatment Plan.â€**

---

### **Output**
1. **Web Interface:**  
   - Displays a structured treatment plan by condition.  
   - Each card includes:
     - **Condition**
     - **Suggested Treatment**
     - **Supporting Evidence**

2. **Downloadable PDF:**  
   - Title: `Your Preliminary Treatment Plan Explained`  
   - Provides **simple, compassionate** explanations for each condition and treatment.

---

## âš™ï¸ Setup & Installation

### **1. Prerequisites**
- Python **3.10+**
- A **Hugging Face API Token** (e.g., `meta-llama/Meta-Llama-3-70B-Instruct`)

---

### **2. Clone the Repository**
```bash
git clone <your-repo-url>
cd C.A.R.E
