# 🩺 C.A.R.E: Clinical Assistant for Research and Evidence

**C.A.R.E.** is a prototype **clinical decision support system (CDSS)** designed to assist healthcare professionals by combining **Retrieval-Augmented Generation (RAG)** with real-time medical research integration.

It intelligently analyzes patient data, fetches relevant medical studies from the **Semantic Scholar API**, and generates a **Preliminary Treatment Plan** — along with a **patient-friendly educational PDF** that explains the plan in simple language.

---

## 🧠 Project Overview

C.A.R.E. operates as an intelligent assistant for clinical decision-making.

It has two main outputs:

1. **Preliminary Treatment Plan**
   - Generated by a **RAG pipeline** that merges patient-specific data with up-to-date research.
   - Uses **Pathway** for document monitoring, indexing, and hybrid retrieval.

2. **Patient-Friendly Educational Material**
   - A **downloadable PDF** that explains the treatment plan in clear, empathetic language.
   - Generated by a second **LLM call** for human-readable explanations.

---

## 🏗️ System Architecture

C.A.R.E. follows a **microservice-based architecture** — separating the user interface from backend processing for scalability and modularity.

### 1. Pathway RAG Pipeline Server (`pipeline.py`)
**Technology:** `pathway`  
**Runs on:** `http://localhost:8001`  

#### Role:
- Persistent background service for data ingestion and retrieval.

#### Functionality:
- Monitors `Data/processed/patient_text/` and `Data/processed/research/` directories.
- Automatically parses, splits, and indexes new `.txt` documents.
- Uses a **hybrid retrieval system** (BM25 + Vector Embeddings).
- Exposes an API endpoint `/v2/answer` for structured query responses.

---

### 2. FastAPI Web Server (`api_server.py`)
**Technology:** `FastAPI`, `Jinja2`  
**Runs on:** `http://localhost:8000`  

#### Role:
- Acts as the **user-facing interface** and **orchestration layer**.

#### Workflow:
1. **Patient Selection:**  
   User selects a patient; the system reads the corresponding file.

2. **Research Fetching:**  
   Invokes `research_fetcher` to dynamically query **Semantic Scholar API** for relevant papers.

3. **Indexing:**  
   New papers are saved to `Data/processed/research/`, automatically indexed by the RAG pipeline.

4. **Treatment Plan Generation:**  
   Waits ~20 seconds for indexing, then sends a **keyword-based prompt** to the RAG server.

5. **Display & Download:**  
   - Displays a structured treatment plan on the webpage.
   - On “Download PDF,” converts it into a **patient-friendly educational document**.


## 🧱 Directory Structure

```bash
C.A.R.E/
├── api_server.py
├── src/
│   ├── agent/
│   │   └── pipeline.py
│   ├── data_processing/
│   │   ├── research_fetcher.py
│   │   └── patient_educational_material.py
├── Data/
│   └── processed/
│       ├── patient_text/
│       │   └── patient_123.txt
│       └── research/
├── templates/
│   └── index.html
├── requirements.txt
├── .env
└── README.md

---

## 💾 Input & Output Examples

### **Input**
1. **Patient Data:**  
   `Data/processed/patient_text/patient_123.txt`  
   Contains condition summaries, medications, and medical history.

2. **User Action:**  
   User selects a patient and clicks **“Generate Treatment Plan.”**

---

### **Output**
1. **Web Interface:**  
   - Displays a structured treatment plan by condition.  
   - Each card includes:
     - **Condition**
     - **Suggested Treatment**
     - **Supporting Evidence**

2. **Downloadable PDF:**  
   - Title: `Your Preliminary Treatment Plan Explained`  
   - Provides **simple, compassionate** explanations for each condition and treatment.

---

## ⚙️ Setup & Installation

### **1. Prerequisites**
- Python **3.10+**
- A **Hugging Face API Token** (e.g., `meta-llama/Meta-Llama-3-70B-Instruct`)

---

### **2. Clone the Repository**
```bash
git clone <your-repo-url>
cd C.A.R.E
